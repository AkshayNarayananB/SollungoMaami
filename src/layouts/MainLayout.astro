---
import Base from "./BaseLayout.astro";
import NavBar from "../components/NavBar.astro";
import Banner from "../components/Banner.astro";
import Footer from "../components/Footer.astro";
import SideBar from "../components/SideBar.astro";
import MaamiConfig from "../../maami.config";

export interface Props {
  title?: string;
  subTitle?: string;
  bannerImage?: string;
  slug?: string;
  allPosts?: any[];
  allRoutes?: any[]; // Keep this here
}

// FIX 1: Add 'allRoutes' to the destructured object below
const { title, subTitle, bannerImage, slug, allPosts, allRoutes } = Astro.props;
---

<Base>
  <NavBar />

  {
    MaamiConfig.bannerStyle == "LOOP" && (
      <Banner
        title={title}
        subTitle={subTitle}
        bannerImage={bannerImage}
        slug={slug}
      />
    )
  }

  <div class="main-container my-10">
    <div class="flex flex-row items-start xl:space-x-4">
      <div class="side-bar">
        {/* FIX 2: Pass 'allRoutes' into the SideBar component */}
        <SideBar allPosts={allPosts} allRoutes={allRoutes} />
      </div>
      <div class="transition-leaving w-full space-y-8">
        <main class="content onload-animation">
          <slot />
        </main>
        <Footer />
      </div>
    </div>
  </div>
</Base>

<style>
  /* ... Styles remain unchanged ... */
</style>
