---
// src/components/Comments.astro
const { slug, title } = Astro.props;
const pageUrl = `${Astro.site}/posts/${slug}`;
const pageIdentifier = slug;
---

<section class="comments-section">
  <h2 class="text-xl font-bold mb-4">Comments</h2>
  <div id="disqus_thread"></div>
</section>

<script is:client>
  const pageUrl = `${Astro.site}/posts/${slug}`;
  const pageIdentifier = slug;

  var disqus_config = function () {
    this.page.url = pageUrl;         // Dynamic canonical URL for this post
    this.page.identifier = pageIdentifier; // Unique identifier for this post
  };

  (function() { // Load Disqus script
    var d = document, s = d.createElement('script');
    s.src = 'https://sollungomaami.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>

<noscript>
  Please enable JavaScript to view the 
  <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

<!-- Optional: Load comment count -->
<script id="dsq-count-scr" src="//sollungomaami.disqus.com/count.js" async></script>
