---
// src/components/Comments.astro
const { slug } = Astro.props;

// Generate the full URL for the post
const postUrl = `${Astro.site}${slug}`;
---

<section class="comments-section">
  <h2 class="text-xl font-bold mb-4">Comments</h2>

  <!-- Facebook SDK root -->
  <div id="fb-root"></div>
  
  <!-- Load Facebook SDK once -->
  <script is:client>
    if (!window.FB) {
      const script = document.createElement('script');
      script.async = true;
      script.defer = true;
      script.crossOrigin = 'anonymous';
      script.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v23.0';
      document.body.appendChild(script);
    }
  </script>

  <!-- Facebook Comments plugin -->
  <div class="fb-comments" 
       data-href={postUrl} 
       data-width="100%" 
       data-numposts="1000">
  </div>
</section>
